"use strict";(()=>{var e={};e.id=302,e.ids=[302],e.modules={9344:e=>{e.exports=require("jsonwebtoken")},1185:e=>{e.exports=require("mongoose")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7618:e=>{e.exports=import("bcryptjs")},5313:(e,t,a)=>{a.a(e,async(e,o)=>{try{a.r(t),a.d(t,{config:()=>l,default:()=>u,routeModule:()=>c});var r=a(1802),n=a(7153),i=a(6249),s=a(6304),d=e([s]);s=(d.then?(await d)():d)[0];let u=(0,i.l)(s,"default"),l=(0,i.l)(s,"config"),c=new r.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/notes/[id]",pathname:"/api/notes/[id]",bundlePath:"",filename:""},userland:s});o()}catch(e){o(e)}})},6304:(e,t,a)=>{a.a(e,async(e,o)=>{try{a.r(t),a.d(t,{default:()=>handler});var r=a(4637),n=a(8574),i=a(9823),s=e([i]);async function handler(e,t){await (0,r.connectDB)();let a=e.headers.authorization?.split(" ")[1],o=a?(0,i.WX)(a):null;if(!o)return t.status(401).json({error:"Unauthorized"});let s=o.tenant,d=await n.j.findById(e.query.id);return d&&d.tenant===s?"GET"===e.method?t.json(d):"PUT"===e.method?(d.title=e.body.title??d.title,d.body=e.body.body??d.body,await d.save(),t.json(d)):"DELETE"===e.method?(await d.remove(),t.json({ok:!0})):void t.status(405).end():t.status(404).json({error:"Note not found"})}i=(s.then?(await s)():s)[0],o()}catch(e){o(e)}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[222,382,823],()=>__webpack_exec__(5313));module.exports=a})();